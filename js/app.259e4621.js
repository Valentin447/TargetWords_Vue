(function(){"use strict";var e={6592:function(e,t,r){var n=r(7764),o=r(4108);function s(e,t,r,n,s,i){const a=(0,o.E1)("PreLoader"),l=(0,o.E1)("router-view");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.K2)(a),(0,o.K2)(l)],64)}var i=r(9096);const a=e=>((0,o.ED)("data-v-c6968d9a"),e=e(),(0,o.ii)(),e),l=a((()=>(0,o.QD)("svg",{class:"preloader__svg","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.0",width:"120px",height:"120px",viewBox:"0 0 128 128","xml:space":"preserve"},[(0,o.QD)("g",null,[(0,o.QD)("path",{d:"M105.54 39.9l13.56-6.42s-9.67-26.82-47.05-30.1C31.68-.1 15.25 35.6 15.25 35.6S31.13 9.55 63.6 11.1c32.6 1.53 41.96 28.8 41.96 28.8zm-41.6 72.52l-1.2 14.97s28.15 5.04 49.67-25.7c23.3-33.2.46-65.34.46-65.34s14.7 26.8-2.86 54.13c-17.66 27.5-46.05 21.9-46.05 21.9zm-42.06-72.3L9.52 31.58S-8.96 53.4 6.9 87.42c17.12 36.73 56.38 33.03 56.38 33.03s-30.56-.68-45.46-29.55c-14.96-29 4.06-50.8 4.06-50.8z",fill:"#1fbe69"}),(0,o.QD)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 63.9 64.2",to:"120 63.9 64.2",dur:"1080ms",repeatCount:"indefinite"})])],-1))),d=[l];function u(e,t,r,n,s,a){return(0,o.Wz)(),(0,o.An)("div",{class:(0,i.WN)(e.preloaderClass)},d,2)}var c={methods:{off(){preloaderClass="preloader"},on(){preloaderClass="preloader preloader_show"}}},f=r(4100);const h=(0,f.c)(c,[["render",u],["__scopeId","data-v-c6968d9a"]]);var p=h;const g={class:"reader"},w={class:"reader__file-name"};function v(e,t,r,n,s,a){const l=(0,o.E1)("DragAndDrop"),d=(0,o.E1)("InputFile"),u=(0,o.E1)("router-view");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.QD)("div",g,[(0,o.K2)(l,{onDropFile:a.chengeFile},null,8,["onDropFile"]),(0,o.K2)(d,{onInputFile:a.chengeFile},null,8,["onInputFile"]),(0,o.QD)("p",w,(0,i.WA)(s.file.name),1),(0,o.QD)("button",{onClick:t[0]||(t[0]=(...e)=>a.read&&a.read(...e)),id:"read",class:(0,i.WN)([s.readButtonClass,"reader__button-read reader__button-read-hidden"])}," Прочитать ",2)]),(0,o.K2)(u)],64)}var b=r(2332);r(3248),r(2912),r(9904),r(6096),r(8208),r(8592);const m={id:"file-drag-drop"},_={class:"drag-and-drop",ref:"fileform"};function A(e,t,r,n,s,i){return(0,o.Wz)(),(0,o.An)("div",m,[(0,o.QD)("form",_,null,512)])}var D={data(){return{dragAndDrop:!1}},methods:{determineDragAndDrop(){const e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}},mounted(){this.dragAndDrop=this.determineDragAndDrop(),this.dragAndDrop&&(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){this.$refs.fileform.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()}.bind(this),!1)}.bind(this)),this.$refs.fileform.addEventListener("drop",function(e){const t=e.dataTransfer.files[0];this.$emit("dropFile",t)}.bind(this)))}};const y=(0,f.c)(D,[["render",A],["__scopeId","data-v-44141934"]]);var x=y;const C=e=>((0,o.ED)("data-v-0951852a"),e=e(),(0,o.ii)(),e),I=C((()=>(0,o.QD)("label",{for:"input__file",class:"input__file-button"},[(0,o.QD)("p",null,"Выберите *.txt файл")],-1))),W=C((()=>(0,o.QD)("p",{class:"input__text-drag-drop"},"или перетащите файл сюда",-1)));function E(e,t,r,n,s,i){return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.QD)("input",{name:"file",type:"file",id:"input__file",class:"input input__file",onChange:t[0]||(t[0]=(...e)=>i.inputChange&&i.inputChange(...e))},null,32),I,W],64)}var L={data(){return{}},methods:{inputChange(e){const t=e.target.files[0];this.$emit("inputFile",t)}}};const O=(0,f.c)(L,[["render",E],["__scopeId","data-v-0951852a"]]);var T=O,S=r(7192),R={data(){return{file:{},wordsArr:[],readButtonClass:""}},methods:{...(0,S.sR)(["SET_WORDS_LIST","SET_ALL_WORDS_COUNT"]),chengeFile(e){this.file=e,this.readButtonClass="reader__button-read reader__button-read-showe"},getSortedArray(e){const t=[];let r={word:"",count:0};while(Object.keys(e).length>0){for(const t in e)e[t]>r.count&&(r.word=t,r.count=e[t]);t.push(structuredClone(r)),delete e[r.word],r.word="",r.count=0}return t},deletePlural(e){const t=[];for(const r in e)"s"!==r.at(-1)&&t.push(r);for(const r of t)for(const t in e){const n=r+"s";n===t&&delete e[t]}},isOneSymbolWord(e){const t=/[a-z]/;return!t.test(e)||"a"===e||"i"===e},async read(){const e=new Q(this.file),t=new RegExp("[^\\w]+|[0-9]","g");this.wordsArr.splice(0,this.wordsArr.length);const r=[];let n=0;while(!e.endOfStream){const o=await e.readLine(),s=o.split("\r\n"),i=s[0].replace(/0[xX][A-Fa-f0-9]+/g,""),a=i.replace(t," "),l=a.replace(/([A-Z])/g," $1"),d=l.split(" ");for(let e of d)if(""!==e&&(1!==e.length||"a"===e||"i"===e)){n++,e=e.toLowerCase();let t=!1;for(const n of r)if(e===n.word){n.count++,t=!0;break}t||r.push(B(e))}}this.SET_ALL_WORDS_COUNT(n),this.wordsArr=r,F(this.wordsArr),this.wordsArr.sort(((e,t)=>t.count-e.count)),this.SET_WORDS_LIST(this.wordsArr),this.$router.push({path:"/list"})}},components:{DragAndDrop:x,InputFile:T}};function B(e){const t={word:e,count:1};return t}function F(e){const t=[];for(const r of e)"s"!==r.word.at(-1)&&t.push(r);for(const r of t)for(let t=0;t<e.length;t++)if(r.word+"s"===e[t].word){r.count+=e[t].count,e.splice(t,1);break}}class Q{get allCachedLinesAreDispatched(){return!(this.lineIndexTracker<this.lineCount)}get blobIsReadInFull(){return!(this.position<this.length)}get bufferIsEmpty(){return 0===this.byteBuffer.length}get endOfStream(){return this.blobIsReadInFull&&this.allCachedLinesAreDispatched&&this.bufferIsEmpty}constructor(e){(0,b.c)(this,"CHUNK_SIZE",8192e3),(0,b.c)(this,"position",0),(0,b.c)(this,"length",0),(0,b.c)(this,"byteBuffer",new Uint8Array(0)),(0,b.c)(this,"lines",[]),(0,b.c)(this,"lineCount",0),(0,b.c)(this,"lineIndexTracker",0),(0,b.c)(this,"fileReader",new FileReader),(0,b.c)(this,"textDecoder",new TextDecoder("utf-8")),this.blob=e,this.length=e.size}blob2arrayBuffer(e){return new Promise(((t,r)=>{this.fileReader.onerror=r,this.fileReader.onload=()=>{t(this.fileReader.result)},this.fileReader.readAsArrayBuffer(e)}))}read(e,t){return new Promise((async(r,n)=>{if(!Number.isInteger(e)||!Number.isInteger(t)||t<1||e<0||e>this.length-1)return void r(new ArrayBuffer(0));let o=e+t;o>this.length&&(o=this.length);let s=this.blob.slice(e,o);r(await this.blob2arrayBuffer(s))}))}readLine(){return new Promise((async(e,t)=>{if(this.allCachedLinesAreDispatched){while(!this.blobIsReadInFull){let t=await this.read(this.position,this.CHUNK_SIZE);this.position+=t.byteLength;let r=new Uint8Array(this.byteBuffer.length+t.byteLength);r.set(this.byteBuffer),r.set(new Uint8Array(t),this.byteBuffer.length),this.byteBuffer=r;let n=this.byteBuffer.lastIndexOf(10);if(n>-1){let t=this.textDecoder.decode(this.byteBuffer).split("\n");this.byteBuffer=this.byteBuffer.slice(n+1);let r=t[0];return this.lines=t.slice(1,t.length-1),this.lineCount=this.lines.length,this.lineIndexTracker=0,void e(r+"\n")}}if(!this.bufferIsEmpty){let t=this.textDecoder.decode(this.byteBuffer);return this.byteBuffer=new Uint8Array(0),void e(t)}e(null)}else e(this.lines[this.lineIndexTracker++]+"\n")}))}}const k=(0,f.c)(R,[["render",v],["__scopeId","data-v-b1f62326"]]);var z=k,K={components:{TextReader:z,PreLoader:p}};const P=(0,f.c)(K,[["render",s]]);var N=P,U=r(7464);function j(e,t,r,n,s,i){const a=(0,o.E1)("PreLoader"),l=(0,o.E1)("TextReader");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.K2)(a),(0,o.K2)(l)],64)}var $={components:{TextReader:z,PreLoader:p}};const Z=(0,f.c)($,[["render",j]]);var H=Z;function M(e,t,r,n,s,i){const a=(0,o.E1)("router-link"),l=(0,o.E1)("ListComponent");return(0,o.Wz)(),(0,o.An)("div",null,[(0,o.K2)(a,{to:"/"},{default:(0,o.Ql)((()=>[(0,o.mY)("Назад")])),_:1}),(0,o.K2)(l)])}const V={class:"info"},X={class:"info"},Y={class:"info"},q={class:"list__word"},G={class:"list__count"};function J(e,t,r,n,s,a){return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.QD)("div",V,[(0,o.QD)("p",X,"Всего слов: "+(0,i.WA)(e.countAllWords),1),(0,o.QD)("p",Y,"Уникальных слов: "+(0,i.WA)(e.wordsArr.length),1)]),(0,o.QD)("ol",null,[((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(e.wordsArr,(e=>((0,o.Wz)(),(0,o.An)("li",{class:"list",key:e.id},[(0,o.QD)("p",q,(0,i.WA)(e.word),1),(0,o.QD)("p",G,(0,i.WA)(e.count),1)])))),128))])],64)}var ee={data(){return{}},components:{},computed:{...(0,S.ys)(["wordsArr","countAllWords"])}};const te=(0,f.c)(ee,[["render",J],["__scopeId","data-v-4cc8f9b5"]]);var re=te,ne={components:{ListComponent:re}};const oe=(0,f.c)(ne,[["render",M]]);var se=oe;const ie=[{path:"/",name:"Index",component:H},{path:"/list",name:"List",component:se}],ae=(0,U.gv)({history:(0,U.oz)("/TargetWords_Vue/"),routes:ie});var le=ae,de=(0,S.eC)({state:{wordsArr:[],countAllWords:0},getters:{},mutations:{SET_ALL_WORDS_COUNT(e,t){e.countAllWords=t},SET_WORDS_LIST(e,t){e.wordsArr=t}},actions:{},modules:{}});(0,n.W0)(N).use(de).use(le).mount("#app")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,s){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],s=e[u][2];for(var a=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(a=!1,s<i&&(i=s));if(a){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,o,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,s,i=n[0],a=n[1],l=n[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(l)var u=l(r)}for(t&&t(n);d<i.length;d++)s=i[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},n=self["webpackChunktarget_words_vue"]=self["webpackChunktarget_words_vue"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[999],(function(){return r(6592)}));n=r.O(n)})();
//# sourceMappingURL=app.259e4621.js.map